{"version":3,"sources":["webpack://_N_E/./components/UI/FormControl/index.js","webpack://_N_E/./components/UI/Label/index.js","webpack://_N_E/./components/UI/Modal/index.js","webpack://_N_E/./containers/ListNavigation/index.js","webpack://_N_E/./parts/ActionsWrapper/index.js","webpack://_N_E/./pages/list/remove/index.js","webpack://_N_E/./utils/hocs/withAuth/index.js","webpack://_N_E/?b0b9"],"names":["CLASS_NAME","className","rest","clsx","MODAL_CLASS_NAME","MODAL_BODY_CLASS_NAME","MODAL_HEADER_CLASS_NAME","MODAL_FOOTER_CLASS_NAME","withTheme","theme","opened","onClose","title","body","footer","ref","useRef","useClickAway","shadows","listId","pathname","useRouter","updateListLinks","href","LINKS","query","QUERY_PARAMS","disabled","createListLinks","listLinks","map","listLink","selected","children","withAuth","accountId","accessToken","useState","STATUSES","status","setStatus","removeStatus","setRemoveStatus","error","setError","removeModalOpened","setRemoveModalOpened","useEffect","tmdbAPI","TMDB_API_NEW_VERSION","headers","response","data","created_by","id","Error","console","log","closeRemoveModalHandler","removeListHandler","Router","Loader","NotFound","subtitle","message","PageWrapper","PaddingWrapper","Header","ListNavigation","Modal","TextButton","onClick","FormControl","Label","htmlFor","Button","loading","contained","WrappedComponent","React","forwardRef","props","useAuth","isAuthenticated","window","__NEXT_P","push"],"mappings":"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","file":"static/chunks/pages/list/remove-b124383a17dfe2d3b91c.js","sourcesContent":["\n\nimport clsx from 'clsx';\n\nconst CLASS_NAME = 'form-control';\n\nconst FormControl = ({\n  className,\n  ...rest\n}) => (\n  <>\n    <div\n      className={clsx(CLASS_NAME, className)}\n      {...rest} />\n    <style jsx>{`\n      .${CLASS_NAME} {\n        margin: 8px 0;\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n      }\n      .${CLASS_NAME} > :global(label + *) {\n        margin-top: 4px;\n      }\n    `}</style>\n  </>\n);\n\nexport default FormControl;\n","\n\nimport clsx from 'clsx';\n\nconst CLASS_NAME = 'label';\n\nconst Label = ({\n  className,\n  ...rest\n}) => (\n  <>\n    <label\n      className={clsx(CLASS_NAME, className)}\n      {...rest} />\n    <style jsx>{`\n      .${CLASS_NAME} {\n        font-size: 1.5rem;\n      }\n    `}</style>\n  </>\n);\n\nexport default Label;\n","\nimport { useRef } from 'react';\nimport clsx from 'clsx';\n\nimport Backdrop from 'components/UI/Backdrop';\nimport withTheme from 'utils/hocs/withTheme';\nimport useClickAway from 'utils/hooks/useClickAway';\n\nconst MODAL_CLASS_NAME = 'modal';\nconst MODAL_BODY_CLASS_NAME = 'modal-body';\nconst MODAL_HEADER_CLASS_NAME = 'modal-header';\nconst MODAL_FOOTER_CLASS_NAME = 'modal-footer';\n\nconst Modal = ({\n  theme,\n  opened,\n  onClose,\n  className,\n  title,\n  body,\n  footer,\n  ...rest\n}) => {\n  const ref = useRef(null);\n  useClickAway(ref, () => {\n    onClose();\n  });\n\n  return (\n    <>\n      <Backdrop opened={opened}>\n        <div\n          ref={ref}\n          className={clsx(MODAL_CLASS_NAME, className)}\n          {...rest}>\n          {title && (\n            <div className={MODAL_HEADER_CLASS_NAME}>\n              <h2>{title}</h2>\n            </div>\n          )}\n          {body && (\n            <div className={MODAL_BODY_CLASS_NAME}>\n              {body}\n            </div>\n          )}\n          {footer && (\n            <div className={MODAL_FOOTER_CLASS_NAME}>\n              {footer}\n            </div>\n          )}\n        </div>\n      </Backdrop>\n      <style jsx>{`\n        .${MODAL_CLASS_NAME} {\n          width: 80%;\n          max-height: 435px;\n          max-width: 444px;\n          box-shadow: ${theme.shadows[5]};\n          background-color: var(--palette-background-paper);\n        }\n        \n        .${MODAL_HEADER_CLASS_NAME} {\n          padding: 16px 24px;\n          border-bottom: 1px solid var(--palette-divider);\n        }\n\n        .${MODAL_HEADER_CLASS_NAME} > h2 {\n          font-size: 2.125rem;\n        }\n        \n        .${MODAL_BODY_CLASS_NAME} {\n          padding: 16px 24px;\n          font-size: 1.5rem;\n        }\n        \n        .${MODAL_FOOTER_CLASS_NAME} {\n          padding: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: flex-end;\n          border-top: 1px solid var(--palette-divider);\n        }\n      `}</style>\n    </>\n  );\n};\n\nexport default withTheme(Modal);\n","\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\n\nimport Navbar, { NavbarItem } from 'components/UI/Navbar';\nimport LINKS from 'utils/constants/links';\nimport QUERY_PARAMS from 'utils/constants/query-params';\n\nconst ListNavigation = ({ listId }) => {\n  const { pathname } = useRouter();\n\n  const updateListLinks = [\n    {\n      title: 'Edit List',\n      href: {\n        pathname: LINKS.ADD_OR_EDIT_LIST.HREF,\n        query: {[QUERY_PARAMS.ID]: listId}\n      },\n      disabled: false\n    },\n    {\n      title: 'View List',\n      href: {\n        pathname: LINKS.LIST.HREF,\n        query: {\n          [QUERY_PARAMS.ID]: listId,\n          [QUERY_PARAMS.PAGE]: 1\n        }\n      },\n      disabled: false\n    },\n    {\n      title: 'Add/Remove Items',\n      href: {\n        pathname: LINKS.ADD_OR_REMOVE_ITEMS_AT_LIST.HREF,\n        query: {\n          [QUERY_PARAMS.LIST_ID]: listId,\n          [QUERY_PARAMS.PAGE]: 1\n        }\n      },\n      disabled: false\n    },\n    {\n      title: 'Choose Image',\n      href: {\n        pathname: LINKS.CHOOSE_LIST_IMAGE.HREF,\n        query: {[QUERY_PARAMS.LIST_ID]: listId, [QUERY_PARAMS.PAGE]: 1}\n      },\n      disabled: false\n    },\n    {\n      title: 'Delete List',\n      href: {\n        pathname: LINKS.REMOVE_LIST.HREF,\n        query: {[QUERY_PARAMS.ID]: listId}\n      },\n      disabled: false\n    }\n  ];\n\n  const createListLinks = [\n    {\n      title: 'Step1: List Details',\n      href: {\n        pathname: LINKS.ADD_OR_EDIT_LIST.HREF\n      },\n      disabled: false\n    },\n    {\n      title: 'Step2: Add Items',\n      href: {\n        pathname: LINKS.ADD_OR_REMOVE_ITEMS_AT_LIST.HREF\n      },\n      disabled: true\n    },\n    {\n      title: 'Step3: Choose Image',\n      href: {\n        pathname: LINKS.CHOOSE_LIST_IMAGE.HREF\n      },\n      disabled: true\n    }\n  ];\n\n  let listLinks = listId ? updateListLinks : createListLinks;\n\n  return (\n    <Navbar>\n      {listLinks.map(listLink => (\n        <NavbarItem\n          key={listLink.title}\n          disabled={listLink.disabled}\n          selected={pathname === listLink.href.pathname}>\n          <Link\n            href={listLink.href}>\n            <a>{listLink.title}</a>\n          </Link>\n        </NavbarItem>  \n      ))}\n    </Navbar>\n  );\n};\n\nexport default ListNavigation;\n","\nconst ActionsWrapper = ({\n  children,\n  ...rest\n}) => (\n  <>\n    <div {...rest}>\n      {children}\n    </div>\n    <style jsx>{`\n      div {\n        display: flex;\n        align-items: center;\n      }\n      \n      div > :global(:not(:first-child)) {\n        margin-left: 8px;\n      }\n    `}</style>\n  </>\n);\n\nexport default ActionsWrapper;\n","\nimport { useState, useEffect } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport Head from 'next/head';\n\nimport Header from 'parts/Header';\nimport NotFound from 'parts/NotFound';\nimport PageWrapper from 'parts/PageWrapper';\nimport PaddingWrapper from 'parts/PaddingWrapper';\nimport ActionsWrapper from 'parts/ActionsWrapper';\nimport ListNavigation from 'containers/ListNavigation';\nimport Button from 'components/UI/Button';\nimport Modal from 'components/UI/Modal';\nimport TextButton from 'components/UI/TextButton';\nimport Label from 'components/UI/Label';\nimport FormControl from 'components/UI/FormControl';\nimport Loader from 'components/UI/Loader';\nimport { TMDB_API_NEW_VERSION } from 'config/tmdb';\nimport withAuth from 'utils/hocs/withAuth';\nimport QUERY_PARAMS from 'utils/constants/query-params';\nimport LINKS from 'utils/constants/links';\nimport STATUSES from 'utils/constants/statuses';\nimport tmdbAPI from 'services/tmdbAPI';\n\nconst Remove = ({\n  accountId,\n  accessToken\n}) => {\n  const { query } = useRouter();\n  const listId = query[QUERY_PARAMS.ID];\n\n  const [status, setStatus] = useState(STATUSES.IDLE);\n  const [removeStatus, setRemoveStatus] = useState(STATUSES.IDLE);\n  // TODO: could handle errors\n  const [error, setError] = useState(null);\n  // const [removeError, setRemoveError] = useState(null);\n  const [removeModalOpened, setRemoveModalOpened] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      if (!listId) return;\n      if (!accessToken) return;\n      if (!accountId) return;\n\n      try {\n        setStatus(STATUSES.PENDING);\n        const response = await tmdbAPI.get(`/${TMDB_API_NEW_VERSION}/list/${listId}`, {\n          headers: {\n            'Authorization': `Bearer ${accessToken}`\n          }\n        });\n        const movies = response.data;\n        if (movies.created_by.id === accountId) {\n          setStatus(STATUSES.RESOLVED);\n        } else {\n          throw new Error('You don\\'t seem to have access to this page.');\n        }\n      } catch (error) {\n        console.log('[Remove useEffect] error => ', error);\n        setStatus(STATUSES.REJECTED);\n        setError(error);\n      }\n    })();\n  }, [listId, accessToken, accountId]);\n\n  const openRemoveModalHandler = () => {\n    setRemoveModalOpened(true);\n  };\n\n  const closeRemoveModalHandler = () => {\n    setRemoveModalOpened(false);\n  };\n\n  const removeListHandler = async () => {\n    try {\n      closeRemoveModalHandler();\n\n      const headers = {\n        'Authorization': `Bearer ${accessToken}`\n      };\n      \n      setRemoveStatus(STATUSES.PENDING);\n\n      await tmdbAPI.delete(`/${TMDB_API_NEW_VERSION}/list/${listId}`, {headers});\n\n      setRemoveStatus(STATUSES.RESOLVED);\n\n      Router.push({\n        pathname: LINKS.MY_LISTS.HREF,\n        query: {\n          [QUERY_PARAMS.PAGE]: 1\n        }\n      });\n    } catch (error) {\n      console.log('[Remove removeListHandler] error => ', error);\n      setRemoveStatus(STATUSES.REJECTED);\n      // setRemoveError(error);\n    }\n  };\n\n  if (status === STATUSES.IDLE || status === STATUSES.PENDING) {\n    return <Loader />;\n  }\n  \n  if (status === STATUSES.REJECTED) {\n    // TODO: should show proper error message based on error state\n    return (\n      <NotFound\n        title='Sorry!'\n        subtitle={error?.message ?? 'We can\\'t find the page you\\'re looking for...'} />\n    );\n  }\n\n  if (status === STATUSES.RESOLVED) {\n    return (\n      <>\n        <Head>\n          <title>Delete List</title>\n        </Head>\n        <PageWrapper>\n          <PaddingWrapper>\n            <Header\n              title='Delete List'\n              subtitle='Edit' />\n            <ListNavigation listId={listId} />\n            <Modal\n              opened={removeModalOpened}\n              onClose={closeRemoveModalHandler}\n              title='Are you sure?'\n              body={<p>By clicking yes, this list will be permanently deleted.</p>}\n              footer={\n                <ActionsWrapper>\n                  <TextButton onClick={closeRemoveModalHandler}>\n                    No\n                  </TextButton>\n                  <TextButton onClick={removeListHandler}>\n                    Yes\n                  </TextButton>\n                </ActionsWrapper>\n              } />\n            <FormControl>\n              <Label htmlFor='delete-list-button'>\n                Click the button below if you are sure you want to delete this list.\n              </Label>\n              <Button\n                id='delete-list-button'\n                loading={removeStatus === STATUSES.PENDING}\n                contained\n                title='Delete'\n                onClick={openRemoveModalHandler} />\n            </FormControl>\n          </PaddingWrapper>\n        </PageWrapper>\n      </>\n    );\n  }\n};\n\nexport default withAuth(Remove);\n","\n\nimport NotFound from 'parts/NotFound';\nimport { useAuth } from 'utils/hocs/AuthProvider';\n\n/**\n * TODO:\n * Should handle error state and show proper error message based on error state. \n */\n\nconst withAuth = WrappedComponent => {\n  return React.forwardRef(function AuthComponent(props, ref) {\n    const {\n      isAuthenticated,\n      // TODO: could handle errors\n      error,\n      ...rest\n    } = useAuth();\n\n    if (!isAuthenticated) {\n      return (\n        <NotFound\n          title=\"You don't have permission to access this page!\"\n          subtitle=\"You've tried to request a page that requires you to be logged in. Log in to your account.\" />\n      );\n    }\n\n    return (\n      <WrappedComponent\n        ref={ref}\n        {...props}\n        isAuthenticated={isAuthenticated}\n        error={error}\n        {...rest} />\n    );\n  });\n};\n\nexport default withAuth;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/list/remove\",\n      function () {\n        return require(\"private-next-pages/list/remove/index.js\");\n      }\n    ]);\n  "],"sourceRoot":""}